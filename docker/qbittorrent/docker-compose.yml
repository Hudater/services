---
services:
    qbit:
        container_name: qbit
        image: lscr.io/linuxserver/qbittorrent:latest
        networks:
            - proxy
        labels:
            traefik.enable: true
            traefik.http.routers.qbit.rule: Host(`qbit.${CF_DOMAIN}`)
            traefik.http.routers.qbit.middlewares: oauth@file #add this to any container you want to use the Authentik web proxy
            traefik.http.services.qbit.loadbalancer.server.port: 4000
        ports:
            - 4000:4000
            - 6881:6881
            - 6881:6881/udp
        environment:
            - PUID=${PUID}
            - PGID=${PGID}
            - UMASK=002
            - TZ=${TZ}
            - WEBUI_PORT=4000
            - TORRENTING_PORT=6881
            - DOCKER_MODS=ghcr.io/vuetorrent/vuetorrent-lsio-mod:latest
        volumes:
            - "${CFG_DIR}/qbittorrent:/config"
            - "${DATA_DIR}/Torrents:/data/Torrents"
            # - "${DATA_DIR}/Del:/Del"
        restart: unless-stopped

networks:
    proxy:
        external: true
